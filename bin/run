#! /usr/bin/env bash

# DOC: Run a command at a path. Usage: bin/run <path/to/command> --tag=<image tag>
# Optional params:
#   --config=<config_file> to override config file

source bin/lib.sh
source ${CONFIG_FILE}

readonly command_path="${1}"
shift 1

if [[ ! -z "${USE_DOCKER}" ]]; then
    COMMAND="${command_path}"
    exec "bin/lib/run_from_docker"
else 
    source ${CONFIG_FILE}
    CMD_NAME=${command_path} checkout::exec_delegated_command "$@"
fi
